var D=Object.defineProperty,E=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var z=(n,t,e)=>t in n?D(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,P=(n,t)=>{for(var e in t||(t={}))W.call(t,e)&&z(n,e,t[e]);if(j)for(var e of j(t))Y.call(t,e)&&z(n,e,t[e]);return n},R=(n,t)=>E(n,F(t));import{_ as C,d as V,t as G,r as x,o as H,a as L,w as M,b as m,c as h,F as O,e as N,n as T,f as U,g as q,h as J,i as b,j as K,k as A,l as Q,m as y}from"./entry-89c13cc1.mjs";const X=V({props:{columnWidth:{default:400},items:null,gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0}},emits:["redraw","redraw-skip"],setup(n,{expose:t,emit:e}){t();const a=n,{columnWidth:c,items:u,gap:s,rtl:o,ssrColumns:l}=G(a),p=x([]),d=x();function i(){const r=Math.floor((d.value.getBoundingClientRect().width+s.value)/(c.value+s.value));return r>0?r:1}function _(r){return[...new Array(r)].map(()=>[])}if(l.value>0){const r=_(l.value);u.value.forEach((w,g)=>r[g%l.value].push(g)),p.value=r}async function v(r){if(r>=u.value.length)return;await q();const w=[...d.value.children];o.value&&w.reverse();const g=w.reduce((B,S)=>S.getBoundingClientRect().height<B.getBoundingClientRect().height?S:B);p.value[+g.dataset.index].push(r),await v(r+1)}async function f(r=!1){if(p.value.length===i()&&!r){e("redraw-skip");return}p.value=_(i());const w=window.scrollY;await v(0),window.scrollTo({top:w}),e("redraw")}const $=new ResizeObserver(()=>f());H(()=>{f(),$.observe(d.value)}),L(()=>$.unobserve(d.value)),M([u,o],()=>f(!0)),M([c,s],()=>f());const k={props:a,columnWidth:c,items:u,gap:s,rtl:o,ssrColumns:l,columns:p,wall:d,emit:e,columnCount:i,createColumns:_,fillColumns:v,redraw:f,resizeObserver:$};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),Z=["data-index"];function I(n,t,e,a,c,u){return m(),h("div",{ref:"wall",class:"masonry-wall",style:T({display:"flex",gap:`${a.gap}px`})},[(m(!0),h(O,null,N(a.columns,(s,o)=>(m(),h("div",{key:o,class:"masonry-column","data-index":o,style:T({display:"flex","flex-basis":0,"flex-direction":"column","flex-grow":1,height:["-webkit-max-content","-moz-max-content","max-content"],gap:`${a.gap}px`})},[(m(!0),h(O,null,N(s,l=>(m(),h("div",{key:l,class:"masonry-item"},[U(n.$slots,"default",{item:a.items[l],index:l},()=>[J(b(a.items[l]),1)])]))),128))],12,Z))),128))],4)}var ee=C(X,[["render",I]]);const te=V({async setup(n,{expose:t}){t();let e,a;const c=[100,210,320];function u(i){return i.map(_=>{const v=`150x${c[Math.floor(Math.random()*c.length)]}.webp`,f=_.url.replace("600",v);return R(P({},_),{url:f})})}const s=i=>`https://jsonplaceholder.typicode.com/photos?_start=${i}&_limit=100`;async function o(i){const _=await fetch(s(i));return u(await _.json())}let l=x(0);const p=x(([e,a]=K(()=>o(l.value)),e=await e,a(),e)),d={placeholderPhotoHeights:c,formatPhotos:u,url:s,loadPhotos:o,page:l,items:p};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),ne={class:"container"},ae={class:"item"},se=["src"];function oe(n,t,e,a,c,u){const s=ee;return m(),h("div",ne,[A(s,{items:a.items,"ssr-columns":1,"column-width":150,gap:10},{default:Q(({item:o})=>[y("figure",ae,[y("img",{src:o.url,alt:""},null,8,se),y("figcaption",null,[y("span",null,b(o.id)+") "+b(o.title),1)])])]),_:1},8,["items"])])}var re=C(te,[["render",oe]]);const le={components:{}};function ce(n,t,e,a,c,u){const s=re;return m(),h("div",null,[A(s)])}var de=C(le,[["render",ce]]);export{de as default};
