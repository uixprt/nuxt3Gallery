var L=Object.defineProperty,T=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var G=(t,n,e)=>n in t?L(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,M=(t,n)=>{for(var e in n||(n={}))F.call(n,e)&&G(t,e,n[e]);if(R)for(var e of R(n))U.call(n,e)&&G(t,e,n[e]);return t},O=(t,n)=>T(t,D(n));import{_ as $,o as p,c as f,p as W,a as Y,b as v,d as B,t as k,e as q,r as y,f as A,g as I,w as z,F as E,h as H,n as V,i as J,j as K,k as Q,l as X,m as Z,q as S,s as ee}from"./entry-5fea39a7.mjs";const te={},P=t=>(W("data-v-57a00e42"),t=t(),Y(),t),ne=P(()=>v("h1",null,"Nuxt 3 Gallery",-1)),oe=P(()=>v("p",null,"Masonry Gallery implementation with Vue Composition API and Nuxt 3",-1)),ae=P(()=>v("p",null,[v("a",{href:"https://github.com/uixprt/nuxt3Gallery"},"See Source Code on GitHub")],-1)),se=[ne,oe,ae];function re(t,n){return p(),f("header",null,se)}var le=$(te,[["render",re],["__scopeId","data-v-57a00e42"]]);const ce=B({props:{url:String,title:String,id:Number},setup(t,{expose:n}){n();const a={props:t};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),ue=["src"];function ie(t,n,e,a,i,_){return p(),f("figure",null,[v("img",{src:e.url,alt:"{{title}}"},null,8,ue),v("figcaption",null,[v("span",null,k(e.id)+") "+k(e.title),1)])])}var _e=$(ce,[["render",ie],["__scopeId","data-v-04c351f0"]]);const de=B({props:{columnWidth:{default:400},items:null,gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0}},emits:["redraw","redraw-skip"],setup(t,{expose:n,emit:e}){n();const a=t,{columnWidth:i,items:_,gap:c,rtl:r,ssrColumns:o}=q(a),d=y([]),m=y();function w(){const s=Math.floor((m.value.getBoundingClientRect().width+c.value)/(i.value+c.value));return s>0?s:1}function h(s){return[...new Array(s)].map(()=>[])}if(o.value>0){const s=h(o.value);_.value.forEach((x,C)=>s[C%o.value].push(C)),d.value=s}async function g(s){if(s>=_.value.length)return;await K();const x=[...m.value.children];r.value&&x.reverse();const C=x.reduce((j,N)=>N.getBoundingClientRect().height<j.getBoundingClientRect().height?N:j);d.value[+C.dataset.index].push(s),await g(s+1)}async function l(s=!1){if(d.value.length===w()&&!s){e("redraw-skip");return}d.value=h(w());const x=window.scrollY;await g(0),window.scrollTo({top:x}),e("redraw")}const u=new ResizeObserver(()=>l());A(()=>{l(),u.observe(m.value)}),I(()=>u.unobserve(m.value)),z([_,r],()=>l(!0)),z([i,c],()=>l());const b={props:a,columnWidth:i,items:_,gap:c,rtl:r,ssrColumns:o,columns:d,wall:m,emit:e,columnCount:w,createColumns:h,fillColumns:g,redraw:l,resizeObserver:u};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),pe=["data-index"];function fe(t,n,e,a,i,_){return p(),f("div",{ref:"wall",class:"masonry-wall",style:V({display:"flex",gap:`${a.gap}px`})},[(p(!0),f(E,null,H(a.columns,(c,r)=>(p(),f("div",{key:r,class:"masonry-column","data-index":r,style:V({display:"flex","flex-basis":0,"flex-direction":"column","flex-grow":1,height:["-webkit-max-content","-moz-max-content","max-content"],gap:`${a.gap}px`})},[(p(!0),f(E,null,H(c,o=>(p(),f("div",{key:o,class:"masonry-item"},[J(t.$slots,"default",{item:a.items[o],index:o},()=>[Q(k(a.items[o]),1)])]))),128))],12,pe))),128))],4)}var me=$(de,[["render",fe]]);const he=B({async setup(t,{expose:n}){n();let e,a;const i=[100,210,320];function _(l){return l.map(u=>{const b=`250x${i[Math.floor(Math.random()*i.length)]}.webp`,s=u.url.replace("600",b);return O(M({},u),{url:s})})}const c=(l,u=25)=>`https://jsonplaceholder.typicode.com/photos?_start=${l*u}&_limit=${u}`;async function r(l){const u=await fetch(c(l));return _(await u.json())}const o=y(0),d=y(([e,a]=X(()=>r(o.value)),e=await e,a(),e));async function m(){if(o.value>=3)return;o.value++;const l=await r(o.value);d.value=[...d.value,...l]}const w=y(null);A(()=>{window.addEventListener("scroll",h)}),Z(()=>{window.removeEventListener("scroll",h)});const h=l=>{w.value.getBoundingClientRect().bottom<window.innerHeight&&m()},g={placeholderPhotoHeights:i,formatPhotos:_,url:c,loadPhotos:r,page:o,photos:d,append:m,scrollComponent:w,handleScroll:h};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),ve={ref:"scrollComponent"};function we(t,n,e,a,i,_){const c=_e,r=me;return p(),f("div",ve,[S(r,{items:a.photos,"column-width":250,gap:10},{default:ee(({item:o,index:d})=>[S(c,{class:"item",url:o.url,title:o.title,id:o.id},null,8,["url","title","id"])]),_:1},8,["items"])],512)}var ge=$(he,[["render",we]]);const xe={components:{}},ye={class:"container"};function $e(t,n,e,a,i,_){const c=le,r=ge;return p(),f("div",ye,[S(c),S(r)])}var Se=$(xe,[["render",$e]]);export{Se as default};
