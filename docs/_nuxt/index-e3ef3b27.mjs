var V=Object.defineProperty,W=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var P=(o,t,e)=>t in o?V(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,R=(o,t)=>{for(var e in t||(t={}))A.call(t,e)&&P(o,e,t[e]);if(M)for(var e of M(t))D.call(t,e)&&P(o,e,t[e]);return o},E=(o,t)=>W(o,G(t));import{_ as F}from"./Header-1a77a0fc.mjs";import{_ as C,d as U,o as p,c as f,a as b,w as H,b as S,t as k,n as B,e as Y,f as q,r as x,g as T,h as J,i as L,F as O,j as z,k as K,l as Q,m as X,p as Z,q as I,s as ee}from"./entry-bf1f3112.mjs";const te=U({props:{thumbnailUrl:String,title:String,id:Number,height:Number},setup(o,{expose:t}){t();const e={};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),ne=["src"];function oe(o,t,e,a,u,_){const r=Y;return p(),f("figure",{style:B({minHeight:`${e.height-4}px`})},[b(r,{href:`/photo/${e.id}`},{default:H(()=>[S("img",{src:e.thumbnailUrl,alt:"{{title}}"},null,8,ne),S("figcaption",null,[S("span",null,k(e.id)+") "+k(e.title),1)])]),_:1},8,["href"])],4)}var ae=C(te,[["render",oe],["__scopeId","data-v-584087a8"]]);const re=U({props:{columnWidth:{default:400},items:null,gap:{default:0},rtl:{type:Boolean,default:!1},ssrColumns:{default:0}},emits:["redraw","redraw-skip"],setup(o,{expose:t,emit:e}){t();const a=o,{columnWidth:u,items:_,gap:r,rtl:l,ssrColumns:n}=q(a),d=x([]),h=x();function w(){const s=Math.floor((h.value.getBoundingClientRect().width+r.value)/(u.value+r.value));return s>0?s:1}function m(s){return[...new Array(s)].map(()=>[])}if(n.value>0){const s=m(n.value);_.value.forEach((g,$)=>s[$%n.value].push($)),d.value=s}async function y(s){if(s>=_.value.length)return;await Q();const g=[...h.value.children];l.value&&g.reverse();const $=g.reduce((N,j)=>j.getBoundingClientRect().height<N.getBoundingClientRect().height?j:N);d.value[+$.dataset.index].push(s),await y(s+1)}async function c(s=!1){if(d.value.length===w()&&!s){e("redraw-skip");return}d.value=m(w());const g=window.scrollY;await y(0),window.scrollTo({top:g}),e("redraw")}const i=new ResizeObserver(()=>c());T(()=>{c(),i.observe(h.value)}),J(()=>i.unobserve(h.value)),L([_,l],()=>c(!0)),L([u,r],()=>c());const v={props:a,columnWidth:u,items:_,gap:r,rtl:l,ssrColumns:n,columns:d,wall:h,emit:e,columnCount:w,createColumns:m,fillColumns:y,redraw:c,resizeObserver:i};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),se=["data-index"];function le(o,t,e,a,u,_){return p(),f("div",{ref:"wall",class:"masonry-wall",style:B({display:"flex",gap:`${a.gap}px`})},[(p(!0),f(O,null,z(a.columns,(r,l)=>(p(),f("div",{key:l,class:"masonry-column","data-index":l,style:B({display:"flex","flex-basis":0,"flex-direction":"column","flex-grow":1,height:["-webkit-max-content","-moz-max-content","max-content"],gap:`${a.gap}px`})},[(p(!0),f(O,null,z(r,n=>(p(),f("div",{key:n,class:"masonry-item"},[K(o.$slots,"default",{item:a.items[n],index:n},()=>[X(k(a.items[n]),1)])]))),128))],12,se))),128))],4)}var ce=C(re,[["render",le]]);const ie=U({async setup(o,{expose:t}){t();let e,a;const u=[100,210,320];function _(c){return c.map(i=>{const v=u[Math.floor(Math.random()*u.length)],s=`250x${v}.webp`,g=i.thumbnailUrl.replace("150",s);return E(R({},i),{thumbnailUrl:g,height:v})})}const r=(c,i=25)=>`https://jsonplaceholder.typicode.com/photos?_start=${c*i}&_limit=${i}`;async function l(c){const i=await fetch(r(c));return _(await i.json())}const n=x(0),d=x(([e,a]=Z(()=>l(n.value)),e=await e,a(),e));async function h(){}const w=x(null);T(()=>{window.addEventListener("scroll",m)}),I(()=>{window.removeEventListener("scroll",m)});const m=async c=>{if(w.value.getBoundingClientRect().bottom<window.innerHeight){if(n.value===3){window.removeEventListener("scroll",m);return}n.value++;const v=await l(n.value);d.value=[...d.value,...v]}},y={placeholderPhotoHeights:u,formatPhotos:_,url:r,loadPhotos:l,page:n,photos:d,next:h,scrollComponent:w,handleScroll:m};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),ue={key:0,ref:"scrollComponent"};function _e(o,t,e,a,u,_){const r=ae,l=ce;return a.photos?(p(),f("div",ue,[b(l,{items:a.photos,"column-width":250,gap:10},{default:H(({item:n})=>[b(r,{class:"item",thumbnailUrl:n.thumbnailUrl,title:n.title,id:n.id,height:n.height},null,8,["thumbnailUrl","title","id","height"])]),_:1},8,["items"])],512)):ee("",!0)}var de=C(ie,[["render",_e]]);const me={components:{}},pe={class:"container"};function fe(o,t,e,a,u,_){const r=F,l=de;return p(),f("div",pe,[b(r,{home:"true"}),b(l)])}var we=C(me,[["render",fe]]);export{we as default};
